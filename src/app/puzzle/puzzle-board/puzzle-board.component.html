<div class="w-screen h-screen flex flex-col justify-center items-center bg-gray-200 dark:bg-gray-800">
  <div class="w-full flex justify-center items-center text-2xl font-bold text-gray-800 dark:text-gray-200 my-5">
    <span>难度：</span>
    <span class="flex justify-center items-center">
      <svg *ngIf="difficulty() >= 1" class="w-8 h-8  ms-1 cursor-pointer text-yellow-500 dark:text-yellow-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
        fill="currentColor" viewBox="0 0 22 20">
        <path
          d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
      </svg>
      <svg *ngIf="difficulty() >= 2" class="w-8 h-8  ms-1 cursor-pointer text-yellow-500 dark:text-yellow-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
        fill="currentColor" viewBox="0 0 22 20">
        <path
          d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
      </svg>
      <svg *ngIf="difficulty() >= 3" class="w-8 h-8  ms-1 cursor-pointer text-yellow-500 dark:text-yellow-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
        fill="currentColor" viewBox="0 0 22 20">
        <path
          d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
      </svg>
    </span>
  </div>
  <div class="">
    @for (cs of cells(); track $index) {
    <div class="w-full flex justify-center items-center">
      @for (cell of cs; track $index) {
      <div class="w-32 h-32 border border-solid border-gray-600 m-[1px] flex justify-center items-center"
        [ngClass]="{ 'bg-blue-300 hover:bg-blue-400 dark:bg-blue-500 cursor-pointer': cell.value !== 0}" (click)="clickCell(cell)">
        <span class="text-3xl font-bold text-gray-800 dark:text-gray-200">
          {{ cell.value === 0 ? '' : cell.value }}
        </span>
      </div>
      }
    </div>
    }
  </div>

  <div class="my-10 w-full flex justify-center items-center">
    <span class="text-2xl font-bold text-gray-800 dark:text-gray-200">步数: {{ steps() }}</span>
  </div>
  <button (click)="restart()"
    class="mt-10 w-64 border border-solid text-gray-200 dark:text-gray-200 bg-blue-400 hover:bg-blue-500 dark:bg-blue-600 dark:hover:bg-blue-500 border-orange-300 rounded-md h-14 ">重新开始</button>
  <button (click)="back()" class="mt-5 w-64 border border-solid text-gray-200 dark:text-gray-200 bg-blue-400 hover:bg-blue-500 dark:bg-blue-600 dark:hover:bg-blue-500 border-orange-300 rounded-md h-14 ">返回</button>


</div>

<!-- winner -->
<div *ngIf="finished()"
  class="absolute top-0 left-0 w-full h-full flex flex-col justify-center items-center bg-gray-200 dark:bg-gray-800 backdrop-blur-md">
  <div class="w-96 h-96 flex flex-col justify-center items-center">
    <div class="text-4xl text-gray-800 dark:text-gray-200 my-5">🎉🎉🎉恭喜🎉🎉🎉</div>
    <div class="text-2xl text-gray-800 dark:text-gray-200 my-5">您已完成拼图！</div>
    <button
      class="my-5 w-64 border border-solid text-gray-200 dark:text-gray-200 bg-blue-400 hover:bg-blue-500 dark:bg-blue-600 dark:hover:bg-blue-500 border-orange-300 rounded-md h-14 "
      (click)="restart()">再来一局</button>
    <button (click)="back()"
      class="my-5 w-64 border border-solid text-gray-200 dark:text-gray-200 bg-blue-400 hover:bg-blue-500 dark:bg-blue-600 dark:hover:bg-blue-500 border-orange-300 rounded-md h-14 ">返回</button>
  </div>
</div>

<audio #movePlayer src="assets/audio/puzzle/move.mp3" class="hidden"></audio>
<audio #winPlayer src="assets/audio/puzzle/winner.mp3" class="hidden"></audio>
